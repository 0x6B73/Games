<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Nozruc's Neon Jackpots</title>
<meta name="theme-color" content="#0ef" />
<style>
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background: radial-gradient(1200px 800px at 50% 20%, #001018 0%, #02040a 45%, #000 70%); color:#e7f8ff}
  :root{--neon1:#00e5ff;--neon2:#ff2fd3;--neon3:#89ff00;--neon4:#ffb300;--muted:#9ed1df;--shadow:0 10px 30px rgba(0,0,0,.55)}
  .container{max-width:1100px;margin:0 auto;padding:24px}
  .logo{font-size:clamp(28px,4vw,56px);font-weight:900;letter-spacing:1px;background:linear-gradient(90deg,var(--neon1),var(--neon2),var(--neon4));-webkit-background-clip:text;background-clip:text;color:transparent;text-shadow:0 0 20px rgba(0,229,255,.35);text-align:center}
  .marquee{height:8px;margin:10px auto 0;max-width:640px;background:linear-gradient(90deg,#012,#024 30%,#013 60%,#012);position:relative;overflow:hidden;border-radius:999px;box-shadow:var(--shadow)}
  .marquee::before{content:"";position:absolute;left:-30%;top:-60%;width:60%;height:220%;background:conic-gradient(from 0deg,var(--neon2),var(--neon1),var(--neon3),var(--neon4),var(--neon2));filter:blur(14px)saturate(160%);animation:sweep 3.5s linear infinite;opacity:.9}
  @keyframes sweep{to{transform:translateX(250%)}}
  .stage{margin:24px auto;background:linear-gradient(180deg,rgba(0,60,90,.35),rgba(0,0,0,.65)),radial-gradient(600px 180px at 50% -20%,rgba(0,229,255,.25),transparent 70%);border:2px solid rgba(0,229,255,.25);border-radius:18px;padding:18px;max-width:920px;box-shadow:var(--shadow);position:relative;isolation:isolate}
  .stage::after{content:"";position:absolute;inset:-8px;border-radius:22px;background:conic-gradient(from 0deg,var(--neon1),transparent 8%,transparent 42%,var(--neon2),transparent 58%,transparent 92%,var(--neon4));filter:blur(18px)saturate(160%);z-index:-1;opacity:.35;animation:glowmove 8s linear infinite}
  @keyframes glowmove{to{transform:rotate(360deg)}}
  .topbar{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 12px;background:linear-gradient(180deg,rgba(0,229,255,.08),rgba(255,47,211,.06));border:1px solid rgba(0,229,255,.2);border-radius:12px}
  .chip{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;background:rgba(0,229,255,.08);border:1px solid rgba(0,229,255,.25);box-shadow:inset 0 0 10px rgba(0,229,255,.2);font-weight:700}
  .chip .dot{width:10px;height:10px;border-radius:999px;background:var(--neon1);box-shadow:0 0 10px var(--neon1),0 0 20px var(--neon1)}
  .reels{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin:16px auto;max-width:760px}
  .reel{position:relative;height:180px;border-radius:14px;background:radial-gradient(280px 120px at 50% -20%,rgba(255,179,0,.2),rgba(255,47,211,.08)),linear-gradient(180deg,#0b1c28,#06141d 35%,#0b1c28);border:1px solid rgba(0,229,255,.25);box-shadow:inset 0 -30px 60px rgba(0,0,0,.45),0 6px 18px rgba(0,0,0,.35);overflow:hidden}
  .window{position:absolute;inset:10px;border-radius:10px;background:linear-gradient(180deg,rgba(0,0,0,.4),rgba(0,0,0,.65));border:1px solid rgba(255,255,255,.06);display:flex;align-items:center;justify-content:center;font-size:64px;text-shadow:0 0 14px rgba(255,255,255,.3)}
  .flash{animation:flash 700ms ease-out}
  @keyframes flash{0%{box-shadow:0 0 0 0 rgba(255,255,255,0)}30%{box-shadow:0 0 25px 8px rgba(255,255,255,.45)}100%{box-shadow:0 0 0 0 rgba(255,255,255,0)}}
  .controls{display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;margin:12px auto 6px}
  button{--bg:#0b1a26;--bd:rgba(0,229,255,.35);border:1px solid var(--bd);background:linear-gradient(180deg,rgba(0,229,255,.1),rgba(255,47,211,.06)),var(--bg);color:#e7f8ff;padding:12px 16px;border-radius:12px;box-shadow:0 8px 18px rgba(0,0,0,.35),inset 0 0 16px rgba(0,229,255,.15);font-weight:800;letter-spacing:.5px;cursor:pointer}
  .tiny{padding:8px 10px;border-radius:10px}
  .bet-input{width:100px;padding:8px 10px;border-radius:10px;border:1px solid rgba(0,229,255,.35);background:#07121a;color:#e7f8ff;font-weight:800;text-align:right;box-shadow:inset 0 0 10px rgba(0,229,255,.15)}
  .message{text-align:center;min-height:28px;margin:8px 0 4px;font-weight:800;letter-spacing:.4px;color:#aff}
  details{margin:12px auto;max-width:780px;background:linear-gradient(180deg,rgba(0,229,255,.06),rgba(137,255,0,.05));border:1px solid rgba(0,229,255,.25);border-radius:12px;padding:12px}
  table{width:100%;border-collapse:collapse;margin-top:10px}
  th,td{padding:8px 10px;border-bottom:1px solid rgba(255,255,255,.08)}
  .right{text-align:right}
  .badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:rgba(0,229,255,.08);border:1px solid rgba(0,229,255,.25);font-weight:800}
  .warn{color:#ff6b6b;font-weight:800}
  .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
  .winring{position:absolute;inset:-6px;border-radius:16px;pointer-events:none;opacity:0}
  .winring.show{opacity:1;animation:ring 900ms ease-out}
  @keyframes ring{0%{box-shadow:0 0 0 0 rgba(137,255,0,0),0 0 0 0 rgba(0,229,255,0)}40%{box-shadow:0 0 12px 4px rgba(137,255,0,.8),0 0 28px 8px rgba(0,229,255,.65)}100%{box-shadow:0 0 0 0 rgba(137,255,0,0),0 0 0 0 rgba(0,229,255,0)}}
  @media (max-width:720px){.reel{height:150px}.window{font-size:52px}}
</style>
</head>
<body>
  <div class="container">
    <div class="logo">Nozruc's Neon Jackpots</div>
    <div class="marquee" aria-hidden="true"></div><div class="stage" id="stage">
  <div class="topbar">
    <div class="chip"><span class="dot"></span> Credits: <span id="credits">0</span></div>
    <div class="chip"><span class="dot" style="background:var(--neon2)"></span> High Score: <span id="high">0</span></div>
    <div class="chip"><span class="dot" style="background:var(--neon4)"></span> Spins: <span id="spins">0</span></div>
  </div>

  <div class="reels">
    <div class="reel"><div class="window" id="r0">üçí</div></div>
    <div class="reel"><div class="window" id="r1">üçã</div></div>
    <div class="reel"><div class="window" id="r2">üîî</div></div>
  </div>

  <div class="controls">
    <button class="tiny" id="betDown" aria-label="Decrease Bet">‚àí</button>
    <input id="betInput" class="bet-input" type="number" min="1" max="100000" step="1" value="10" />
    <button class="tiny" id="betUp" aria-label="Increase Bet">Ôºã</button>
    <button class="primary" id="spinBtn">SPIN ‚ú®</button>
    <button id="maxBtn" title="Bet maximum">Max Bet</button>
    <button id="bonusBtn" title="Claim a periodic bonus">Claim Bonus</button>
    <button id="oddsBtn" title="Show odds & settings">Odds & Settings</button>
  </div>

  <div class="message" id="message" role="status" aria-live="polite"></div>

  <details id="paytable">
    <summary>Paytable & Rules</summary>
    <table>
      <thead><tr><th>Symbol/Pattern</th><th class="right">Pays</th><th>Notes</th></tr></thead>
      <tbody>
        <tr><td>7Ô∏è‚É£7Ô∏è‚É£7Ô∏è‚É£</td><td class="right">√ó50 bet</td><td>Jackpot</td></tr>
        <tr><td>üíéüíéüíé</td><td class="right">√ó20 bet</td><td>Big Win</td></tr>
        <tr><td>‚≠ê‚≠ê‚≠ê</td><td class="right">√ó10 bet</td><td>Bright Win</td></tr>
        <tr><td>üîîüîîüîî</td><td class="right">√ó6 bet</td><td>Classic Win</td></tr>
        <tr><td>üçíüçíüçí</td><td class="right">√ó4 bet</td><td>Cherry Win</td></tr>
        <tr><td>üçãüçãüçã</td><td class="right">√ó3 bet</td><td>Zesty Win</td></tr>
        <tr><td>Any 2-of-a-kind</td><td class="right">√ó0.6 bet</td><td>Small win (often &lt; bet)</td></tr>
        <tr><td>Any single 7Ô∏è‚É£/üíé/‚≠ê</td><td class="right">√ó0.2 bet</td><td>Tiny win (often &lt; bet)</td></tr>
        <tr><td>Wild üåà</td><td class="right">Substitute</td><td>Counts toward matches</td></tr>
      </tbody>
    </table>
    <p style="margin-top:8px;color:#cfe">Small payouts below your bet are <span class="warn">losses disguised as wins (LDWs)</span>. Slots often celebrate these to keep you playing.</p>
  </details>

  <details id="oddsPanel">
    <summary>Odds, House Edge & Settings</summary>
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:10px;margin-top:8px">
      <div>
        <label for="edgeSlider" style="font-weight:800;display:block;margin-bottom:6px">House Edge Adjustment</label>
        <input id="edgeSlider" type="range" min="-25" max="25" step="0.5" />
      </div>
      <div class="badge">Base Edge: <span id="baseEdgeLabel">55%</span></div>
      <div class="badge">Adjustment: <span id="edgeAdjLabel">0%</span></div>
      <div class="badge">Current Edge: <span id="edgeLabel">55%</span></div>
      <div class="badge">Estimated RTP: <span id="rtpLabel">45%</span></div>
      <div class="badge">Last Spin Net: <span id="netLabel" class="mono">0</span></div>
      <div class="badge">LDWs so far: <span id="ldwLabel" class="mono">0</span></div>
      <div>
        <label style="font-weight:800"><input id="truthToggle" type="checkbox" /> Truth Mode (show LDW labels & net)</label>
      </div>
      <div>
        <button id="edgeResetBtn" class="tiny">Reset Adjustment</button>
        <button id="resetBtn" class="tiny" style="border-color:#ff6b6b">Reset Progress</button>
      </div>
    </div>
  </details>

  <div class="winring" id="winring"></div>
  <div style="display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;font-size:12px;color:var(--muted);margin-top:8px">
    <div>Autosaves locally as you play.</div>
    <div>Made for awareness ‚Äî luck isn‚Äôt a strategy. üé∞</div>
  </div>
</div>

  </div><script>
(() => {
  'use strict';

  // ===== Storage =====
  const SAVE_KEY = 'NOZRUC_SLOTS_SAVE_V7';
  const now = () => Date.now();
  const BASE_EDGE = 55; // %
  const SLIDER_RANGE = 25; // ¬±

  const defaultState = () => ({
    credits: 500,
    bet: 10,
    spins: 0,
    high: 500,
    lastBonus: 0,
    edgeAdj: 0,
    truth: false,   // default OFF per your request
    ldwCount: 0
  });

  let state = load();
  function load(){
    try{
      const raw = localStorage.getItem(SAVE_KEY);
      if(!raw) return defaultState();
      const s = JSON.parse(raw);
      if(!Number.isFinite(s.credits) || s.credits<0) s.credits=0;
      if(!Number.isFinite(s.bet) || s.bet<1) s.bet=10;
      if(!Number.isFinite(s.spins) || s.spins<0) s.spins=0;
      if(!Number.isFinite(s.high) || s.high<0) s.high=s.credits;
      if(!Number.isFinite(s.lastBonus) || s.lastBonus<0) s.lastBonus=0;
      if(!Number.isFinite(s.edgeAdj)) s.edgeAdj=0;
      if(typeof s.truth!== 'boolean') s.truth=false;
      if(!Number.isFinite(s.ldwCount) || s.ldwCount<0) s.ldwCount=0;
      return s;
    }catch{ return defaultState(); }
  }
  function save(){ localStorage.setItem(SAVE_KEY, JSON.stringify(state)); }

  // ===== Elements =====
  const $=id=>document.getElementById(id);
  const creditsEl=$('credits'), highEl=$('high'), spinsEl=$('spins');
  const msgEl=$('message'), winring=$('winring'), stage=$('stage');
  const reelEls=[ $('r0'), $('r1'), $('r2') ];
  const spinBtn=$('spinBtn'), betUpBtn=$('betUp'), betDownBtn=$('betDown'), maxBtn=$('maxBtn'), bonusBtn=$('bonusBtn');
  const betInput=$('betInput');
  const oddsBtn=$('oddsBtn'), oddsPanel=$('oddsPanel');
  const edgeSlider=$('edgeSlider'), baseEdgeLabel=$('baseEdgeLabel'), edgeAdjLabel=$('edgeAdjLabel'), rtpLabel=$('rtpLabel'), edgeLabel=$('edgeLabel');
  const edgeResetBtn=$('edgeResetBtn'), resetBtn=$('resetBtn');
  const truthToggle=$('truthToggle'), netLabel=$('netLabel'), ldwLabel=$('ldwLabel');

  // ===== Symbols & weights (LDW-friendly) =====
  const symbols=[
    {ch:'üçí', weight:22, pay:4},
    {ch:'üçã', weight:22, pay:3},
    {ch:'üîî', weight:16, pay:6},
    {ch:'‚≠ê', weight:12, pay:10},
    {ch:'üíé', weight:7, pay:20},
    {ch:'7Ô∏è‚É£', weight:4, pay:50},
    {ch:'üåà', weight:8, pay:0, wild:true} // extra wilds encourage 2-kind
  ];
  const totalWeight = symbols.reduce((a,s)=>a+s.weight,0);
  const weighted=[]; for(const s of symbols) for(let i=0;i<s.weight;i++) weighted.push(s);
  const randSym = ()=> weighted[(Math.random()*weighted.length)|0];

  // ===== Audio (WebAudio, with ticks while spinning) =====
  const AudioKit=(()=>{
    const ctx = new (window.AudioContext||window.webkitAudioContext)();
    let unlocked=false; const unlock=()=>{ if(!unlocked){ ctx.resume(); unlocked=true; }}
    const master=ctx.createGain(); master.gain.value=0.18; master.connect(ctx.destination);
    const comp=ctx.createDynamicsCompressor(); comp.threshold.value=-24; comp.knee.value=22; comp.ratio.value=8; comp.attack.value=0.003; comp.release.value=0.25; comp.connect(master);
    const delay=ctx.createDelay(0.6); delay.delayTime.value=0.14; const dGain=ctx.createGain(); dGain.gain.value=0.18; delay.connect(dGain); dGain.connect(comp);
    const chain=n=>{ n.connect(comp); n.connect(delay); };
    function osc({type='square', f0=440, f1=440, dur=0.15, gain=0.8, start=0}){
      const o=ctx.createOscillator(); o.type=type; o.frequency.setValueAtTime(f0, ctx.currentTime+start); if(f1!==f0) o.frequency.exponentialRampToValueAtTime(Math.max(40,f1), ctx.currentTime+start+dur);
      const g=ctx.createGain(); g.gain.setValueAtTime(0, ctx.currentTime+start); g.gain.linearRampToValueAtTime(gain, ctx.currentTime+start+0.01); g.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime+start+dur);
      o.connect(g); chain(g); o.start(ctx.currentTime+start); o.stop(ctx.currentTime+start+dur+0.02);
    }
    function noise({dur=0.2, lp=12000, hp=200, gain=0.5, start=0}){
      const bufferSize=2*ctx.sampleRate*dur; const buffer=ctx.createBuffer(1,bufferSize,ctx.sampleRate); const data=buffer.getChannelData(0);
      for(let i=0;i<bufferSize;i++) data[i]=(Math.random()*2-1);
      const src=ctx.createBufferSource(); src.buffer=buffer; const g=ctx.createGain(); g.gain.value=gain; const lpf=ctx.createBiquadFilter(); lpf.type='lowpass'; lpf.frequency.value=lp; const hpf=ctx.createBiquadFilter(); hpf.type='highpass'; hpf.frequency.value=hp; src.connect(hpf); hpf.connect(lpf); lpf.connect(g); chain(g); src.start(ctx.currentTime+start); src.stop(ctx.currentTime+start+dur);
    }
    const click=()=>{ unlock(); osc({type:'square', f0:700, f1:600, dur:0.06, gain:0.5}); };
    const lever=()=>{ unlock(); noise({dur:0.08, lp:8000, hp:1000, gain:0.35}); osc({type:'triangle', f0:220, f1:180, dur:0.08, gain:0.6}); };
    const spinWhoosh=()=>{ for(let i=0;i<10;i++) osc({type:'sawtooth', f0:200+i*35, f1:260+i*45, dur:0.06, gain:0.35, start:i*0.045}); };
    const tick=()=>{ osc({type:'square', f0:1200, f1:1000, dur:0.03, gain:0.35}); };
    const stopClack=()=>{ noise({dur:0.05, lp:5000, hp:1200, gain:0.35}); osc({type:'square', f0:300, f1:260, dur:0.05, gain:0.3}); };
    const smallWin=()=>{ [660,880].forEach((f,i)=>osc({type:'triangle', f0:f, f1:f*1.03, dur:0.14, gain:0.55, start:i*0.08})); };
    const win=()=>{ [523,659,783,1046].forEach((f,i)=>osc({type:'triangle', f0:f, f1:f*1.02, dur:0.16, gain:0.65, start:i*0.09})); };
    const jackpot=()=>{ for(let i=0;i<12;i++) osc({type:'sawtooth', f0:300+i*45, f1:400+i*60, dur:0.09, gain:0.55, start:i*0.06}); };
    const lose=()=>{ [220,196].forEach((f,i)=>osc({type:'sine', f0:f, f1:f*0.98, dur:0.18, gain:0.4, start:i*0.08})); };
    return {click,lever,spinWhoosh,tick,stopClack,smallWin,win,jackpot,lose};
  })();

  // ===== Outcome evaluation (LDWs) =====
  function evaluate(a,b,c){
    const arr=[a,b,c];
    const wilds=arr.filter(s=>s.wild).length;
    const bases=arr.filter(s=>!s.wild);
    const counts={};
    for(const s of bases) counts[s.ch]=(counts[s.ch]||0)+1;
    if(bases.length===3 && bases[0].ch===bases[1].ch && bases[1].ch===bases[2].ch) return {mult:bases[0].pay, tag:'3kind'};
    if(wilds>=1 && bases.length>=2){
      const same=Object.keys(counts).find(k=>counts[k]>=2);
      if(same){ const sym=bases.find(x=>x.ch===same); return {mult:sym.pay, tag:'3kind-wild'}; }
    }
    if(Object.values(counts).some(n=>n===2) || (wilds>=1 && bases.length>=1)) return {mult:0.6, tag:'2kind'}; // LDW-prone
    if(arr.some(s=>['‚≠ê','üíé','7Ô∏è‚É£'].includes(s.ch))) return {mult:0.2, tag:'single-high'}; // tiny
    return {mult:0, tag:'lose'};
  }

  // ===== RTP & edge scaling =====
  function computeBaseRTP(){
    let E=0; const L=symbols.length;
    for(let i=0;i<L;i++){ const si=symbols[i], pi=si.weight/totalWeight;
      for(let j=0;j<L;j++){ const sj=symbols[j], pj=sj.weight/totalWeight;
        for(let k=0;k<L;k++){ const sk=symbols[k], pk=sk.weight/totalWeight;
          const {mult}=evaluate(si,sj,sk); E+= mult*(pi*pj*pk);
        }
      }
    }
    return E;
  }
  const BASE_RTP = computeBaseRTP();
  const clamp=(n,a,b)=>Math.max(a,Math.min(b,n));
  const targetEdge=()=> clamp(BASE_EDGE + state.edgeAdj, 0, 95);
  const targetRTP =()=> 1 - (targetEdge()/100);
  const scaleMultiplier=()=> clamp(targetRTP()/BASE_RTP, 0.05, 2);

  function updateOddsUI(){
    $('baseEdgeLabel').textContent = `${BASE_EDGE}%`;
    edgeSlider.min=-SLIDER_RANGE; edgeSlider.max=SLIDER_RANGE; edgeSlider.step=0.5; edgeSlider.value=state.edgeAdj;
    $('edgeAdjLabel').textContent = `${(+state.edgeAdj).toFixed(1)}%`;
    $('rtpLabel').textContent = `${(targetRTP()*100).toFixed(2)}%`;
    $('edgeLabel').textContent = `${(targetEdge()).toFixed(2)}%`;
    truthToggle.checked = !!state.truth;
    ldwLabel.textContent = `${state.ldwCount}`;
  }

  // ===== UI helpers =====
  const fmt=n=>n.toLocaleString();
  const setMessage=t=>{ msgEl.innerHTML = t || '' };
  const flash=el=>{ el.classList.remove('flash'); void el.offsetWidth; el.classList.add('flash'); };
  const ring=()=>{ winring.classList.remove('show'); void winring.offsetWidth; winring.classList.add('show'); setTimeout(()=>winring.classList.remove('show'),900); };

  function sync(){
    creditsEl.textContent=fmt(state.credits);
    highEl.textContent=fmt(state.high);
    spinsEl.textContent=fmt(state.spins);
    betInput.value=state.bet;
    updateOddsUI();
  }
  sync();

  // ===== Betting =====
  function setBet(v){ state.bet = clamp(Math.round(v)||1,1,100000); sync(); save(); }
  betUpBtn.addEventListener('click', ()=>{ AudioKit.click(); setBet(state.bet+5); });
  betDownBtn.addEventListener('click', ()=>{ AudioKit.click(); setBet(state.bet-5); });
  maxBtn.addEventListener('click', ()=>{ AudioKit.click(); setBet(Math.min(state.credits,100000)||1); });
  betInput.addEventListener('change', ()=> setBet(betInput.value) );
  betInput.addEventListener('focus', e=> e.target.select());

  // ===== Bonus (every 2 minutes) =====
  function tryBonus(){
    const COOLDOWN=2*60*1000, amt=50; const ready= now()-state.lastBonus>=COOLDOWN;
    if(ready){ state.credits+=amt; state.lastBonus=now(); setMessage(`Bonus +${amt} credits! ‚ú®`); flash(stage); sync(); save(); return true; }
    const left=Math.ceil((COOLDOWN-(now()-state.lastBonus))/1000); setMessage(`Bonus ready in ${left}s‚Ä¶`); return false;
  }
  bonusBtn.addEventListener('click', ()=>{ AudioKit.click(); tryBonus(); });

  // ===== Spin logic (with ticking) =====
  let spinning=false; let spinIntervals=[]; let spinTimeouts=[];
  const clearSpinTimers=()=>{ for(const id of spinIntervals) clearInterval(id); for(const id of spinTimeouts) clearTimeout(id); spinIntervals=[]; spinTimeouts=[]; };

  function doSpin(){
    if(spinning) return;
    if(state.bet>state.credits){ setMessage('Not enough credits. Lower your bet or claim a bonus.'); AudioKit.lose(); return; }

    AudioKit.lever(); AudioKit.spinWhoosh();

    spinning=true; setMessage('Spinning‚Ä¶');
    state.credits -= state.bet; sync(); save();

    const stopDelays=[760,1080,1420];
    for(let i=0;i<3;i++){
      let speed=90-i*10; // stagger
      const intId=setInterval(()=>{ const s=randSym(); reelEls[i].textContent=s.ch; AudioKit.tick(); }, Math.max(40,speed));
      spinIntervals.push(intId);
   
